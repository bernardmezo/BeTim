// src/components/layout/Navbar.tsx
"use client";

import Link from 'next/link';
import { Search, Menu, X, Store } from 'lucide-react';
import { useState, useEffect } from 'react';
import { usePathname } from 'next/navigation';
import styles from '../styles/Navbar.module.css';

const navLinks = [
  { href: '/', label: 'Beranda' },
  { href: '/store-umkm', label: 'Toko' },
  { href: '/about-betim', label: 'Tentang' },
];

export default function Navbar() {
  const [scrolled, setScrolled] = useState(false);
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
  const [hoveredIndex, setHoveredIndex] = useState<number | null>(null);
  const [indicatorStyle, setIndicatorStyle] = useState({ left: 0, width: 0 });
  
  const pathname = usePathname();
  const isHomePage = pathname === '/';
  
  // Cari index link yang aktif
  const activeIndex = navLinks.findIndex(link => link.href === pathname);
  
  // Update posisi indicator
  const updateIndicator = (element: HTMLElement | null) => {
    if (element && element.parentElement) {
      const parent = element.parentElement.parentElement;
      if (parent) {
        const parentRect = parent.getBoundingClientRect();
        const elementRect = element.getBoundingClientRect();
        setIndicatorStyle({
          left: elementRect.left - parentRect.left,
          width: elementRect.width,
        });
      }
    }
  };
  
  // Handle scroll effect - ALWAYS VISIBLE, changes style on scroll
  useEffect(() => {
    const handleScroll = () => {
      if (isHomePage) {
        setScrolled(window.scrollY > 50);
      } else {
        setScrolled(true); // Always scrolled state on non-home pages
      }
    };
    
    if (isHomePage) {
      window.addEventListener('scroll', handleScroll);
      handleScroll();
      return () => window.removeEventListener('scroll', handleScroll);
    } else {
      setScrolled(true);
    }
  }, [isHomePage]);
  
  // Set initial indicator position untuk active link
  useEffect(() => {
    const activeLink = document.querySelector(`[data-nav-index="${activeIndex}"]`) as HTMLElement;
    if (activeLink) {
      updateIndicator(activeLink);
    }
  }, [activeIndex]);

  // Close mobile menu on route change
  useEffect(() => {
    setMobileMenuOpen(false);
  }, [pathname]);
  
  const isActive = scrolled || !isHomePage;

  return (
    <header 
      className={`
        fixed top-0 left-0 w-full z-50 
        transition-all duration-500 ease-in-out
        ${isActive 
          ? 'bg-white/95 backdrop-blur-lg shadow-lg' 
          : 'bg-transparent'
        }
      `}
    >
      <div className="max-w-7xl mx-auto px-6">
        <div className="flex items-center justify-between h-20">
          {/* LOGO */}
          <div className={styles.logoContainer}>
          <Link href="/"><svg width="128" height="42" viewBox="0 0 128 42" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M54.8 38.48C54.0533 38.48 53.2933 38.2533 52.52 37.8C51.7733 37.32 51.0667 36.6933 50.4 35.92C49.76 35.12 49.24 34.24 48.84 33.28C48.44 32.32 48.24 31.36 48.24 30.4C48.24 28.5067 48.5067 26.6267 49.04 24.76C49.6 22.8933 50.36 21.2 51.32 19.68C52.3067 18.16 53.4667 16.9467 54.8 16.04C56.1333 15.1333 57.5733 14.68 59.12 14.68C59.8133 14.68 60.5733 14.8933 61.4 15.32C62.2267 15.72 62.8267 16.32 63.2 17.12C64.2133 17.6 64.96 18.32 65.44 19.28C65.92 20.24 66.1067 21.12 66 21.92C65.92 22.56 65.64 23.2933 65.16 24.12C64.68 24.92 64.0667 25.7467 63.32 26.6C62.5733 27.4267 61.7467 28.2 60.84 28.92C59.9333 29.6133 59 30.1867 58.04 30.64C57.1067 31.0667 56.2 31.28 55.32 31.28C55 31.28 54.6533 31.1733 54.28 30.96C54.36 31.8133 54.6 32.4267 55 32.8C55.4267 33.1467 55.9867 33.32 56.68 33.32C57.6933 33.32 58.8133 32.96 60.04 32.24C61.2667 31.52 62.5733 30.56 63.96 29.36C64.5733 29.6533 65.04 30.04 65.36 30.52C65.68 30.9733 65.8 31.5467 65.72 32.24C65.6133 33.04 65.1867 33.8133 64.44 34.56C63.72 35.28 62.8 35.9467 61.68 36.56C60.5867 37.1467 59.4267 37.6133 58.2 37.96C57 38.3067 55.8667 38.48 54.8 38.48ZM60.76 19.08C59.72 19.1333 58.7733 19.6133 57.92 20.52C57.0667 21.4267 56.3467 22.5467 55.76 23.88C55.1733 25.1867 54.7467 26.4933 54.48 27.8C55.36 27.6133 56.1867 27.16 56.96 26.44C57.76 25.6933 58.4533 24.8533 59.04 23.92C59.6533 22.96 60.12 22.04 60.44 21.16C60.76 20.2533 60.8667 19.56 60.76 19.08ZM76.2731 38.56C75.6331 38.56 74.9398 38.3333 74.1931 37.88C73.4465 37.4267 72.8331 36.6533 72.3531 35.56C71.8731 34.4667 71.6865 32.9733 71.7931 31.08L72.6331 15.04C72.2065 15.0933 71.7798 15.1333 71.3531 15.16C70.9531 15.16 70.5665 15.16 70.1931 15.16C69.2065 15.16 68.2731 14.9067 67.3931 14.4C66.5398 13.8933 65.8465 13.28 65.3131 12.56C64.8065 11.84 64.5531 11.16 64.5531 10.52C64.5531 10.0667 64.8198 9.84 65.3531 9.84C65.6731 9.84 66.2731 9.8 67.1531 9.72C68.0331 9.64 69.0465 9.54667 70.1931 9.44C71.3665 9.33333 72.5398 9.22666 73.7131 9.12C74.9131 9.01333 75.9931 8.92 76.9531 8.84C77.9398 8.76 78.6598 8.72 79.1131 8.72C79.8865 8.72 80.6865 8.88 81.5131 9.2C82.3398 9.49333 83.0998 9.89333 83.7931 10.4C84.5131 10.88 85.0998 11.4267 85.5531 12.04C86.0065 12.6267 86.2331 13.2 86.2331 13.76C86.2331 14.0533 86.0865 14.2 85.7931 14.2C85.5265 14.2 85.2865 14.2 85.0731 14.2C84.8598 14.1733 84.6331 14.16 84.3931 14.16C83.4865 14.16 82.5665 14.1867 81.6331 14.24C80.6998 14.2933 79.7798 14.36 78.8731 14.44L77.5131 37.56C77.4865 37.9333 77.3798 38.1867 77.1931 38.32C77.0331 38.48 76.7265 38.56 76.2731 38.56ZM91.5894 38.56C90.896 38.56 90.1627 38.4267 89.3894 38.16C88.6427 37.8933 88.0027 37.5067 87.4694 37C86.9627 36.4933 86.7094 35.88 86.7094 35.16C86.7094 34.7333 86.736 33.9733 86.7894 32.88C86.8427 31.7867 86.9094 30.52 86.9894 29.08C87.0694 27.6133 87.1627 26.1067 87.2694 24.56C87.376 22.9867 87.496 21.4933 87.6294 20.08C87.7627 18.6667 87.8827 17.4667 87.9894 16.48C88.016 16.2667 88.1494 16.1333 88.3894 16.08C88.6294 16 88.8294 15.96 88.9894 15.96C89.6027 15.96 90.2827 16.1333 91.0294 16.48C91.776 16.8267 92.416 17.2667 92.9494 17.8C93.5094 18.3333 93.7894 18.8933 93.7894 19.48C93.7894 19.8267 93.736 20.52 93.6294 21.56C93.5227 22.5733 93.3894 23.7867 93.2294 25.2C93.096 26.6133 92.9494 28.0933 92.7894 29.64C92.656 31.1867 92.536 32.6933 92.4294 34.16C92.3227 35.6 92.2694 36.8533 92.2694 37.92C92.2694 38.0533 92.216 38.1867 92.1094 38.32C92.0027 38.48 91.8294 38.56 91.5894 38.56ZM92.1494 12C91.2694 12 90.456 11.9067 89.7094 11.72C88.9894 11.5067 88.416 11.1333 87.9894 10.6C87.5894 10.0667 87.416 9.30666 87.4694 8.32C87.5227 7.81333 87.5894 7.26666 87.6694 6.68C87.776 6.06666 88.1227 5.69333 88.7094 5.56C89.0294 5.50667 89.416 5.46667 89.8694 5.44C90.3227 5.41333 90.7227 5.4 91.0694 5.4C91.816 5.4 92.6427 5.52 93.5494 5.76C94.0027 5.86666 94.2294 6.04 94.2294 6.28C94.2294 6.89333 94.136 7.61333 93.9494 8.44C93.7627 9.26667 93.5627 10.4 93.3494 11.84C92.9227 11.9467 92.5227 12 92.1494 12ZM122.98 38.56C122.153 38.56 121.407 38.32 120.74 37.84C120.073 37.3333 119.54 36.68 119.14 35.88C118.74 35.08 118.54 34.24 118.54 33.36C118.54 32.56 118.593 31.6667 118.7 30.68C118.833 29.6933 118.993 28.7067 119.18 27.72C119.367 26.7333 119.567 25.8533 119.78 25.08L119.62 25C119.007 26.2267 118.353 27.6 117.66 29.12C116.993 30.64 116.38 32.2 115.82 33.8C115.26 35.4 114.807 36.9333 114.46 38.4C113.66 38.3733 112.887 38.32 112.14 38.24C111.42 38.16 110.873 37.8933 110.5 37.44C109.807 37.0933 109.3 36.56 108.98 35.84C108.66 35.12 108.46 34.2933 108.38 33.36C108.3 32.4267 108.26 31.4933 108.26 30.56C108.26 30.2133 108.287 29.7067 108.34 29.04C108.42 28.3733 108.513 27.6533 108.62 26.88C108.753 26.08 108.887 25.3333 109.02 24.64H108.9C107.78 26.8267 106.713 29.0667 105.7 31.36C104.713 33.6533 103.86 36 103.14 38.4C102.34 38.3733 101.687 38.24 101.18 38C100.673 37.76 100.18 37.4 99.7 36.92C98.9267 36.4933 98.38 35.9333 98.06 35.24C97.74 34.52 97.58 33.76 97.58 32.96C97.58 30.5067 97.7267 27.7867 98.02 24.8C98.34 21.8133 98.8333 18.76 99.5 15.64C99.6333 15.1067 99.8467 14.84 100.14 14.84C100.807 14.84 101.473 15 102.14 15.32C102.807 15.64 103.353 16.12 103.78 16.76C104.233 17.4 104.46 18.2 104.46 19.16C104.46 19.3467 104.447 19.56 104.42 19.8C104.393 20.0133 104.353 20.2267 104.3 20.44L102.7 27.96H102.78C103.82 25.6667 104.847 23.5467 105.86 21.6C106.9 19.6267 107.98 18.0133 109.1 16.76C109.34 16.4667 109.7 16.32 110.18 16.32C110.927 16.32 111.727 16.64 112.58 17.28C113.193 17.52 113.66 17.8533 113.98 18.28C114.327 18.68 114.5 19.1067 114.5 19.56C114.5 19.6133 114.5 19.68 114.5 19.76C114.5 19.84 114.487 19.9067 114.46 19.96C114.033 21.5067 113.687 23.16 113.42 24.92C113.153 26.68 113.007 28.3733 112.98 30L113.18 30.04C114.033 27.9867 114.913 26.0267 115.82 24.16C116.727 22.2667 117.927 20.36 119.42 18.44C119.633 18.2 119.953 18.08 120.38 18.08C121.153 18.08 121.993 18.4 122.9 19.04C123.513 19.2533 124.02 19.5467 124.42 19.92C124.82 20.2933 125.113 20.68 125.3 21.08C124.9 23.0267 124.567 25.2133 124.3 27.64C124.033 30.04 123.9 32.32 123.9 34.48C123.9 35.1733 123.913 35.84 123.94 36.48C123.993 37.12 124.047 37.7333 124.1 38.32C123.753 38.48 123.38 38.56 122.98 38.56Z" fill="#04343B"/>
          <path d="M8.74463 20.9043C9.31328 20.9307 9.88193 20.9571 10.4678 20.9843C10.4204 21.0371 10.373 21.0899 10.3242 21.1443C10.4664 21.174 10.6085 21.2037 10.755 21.2343C11.5931 21.435 12.399 21.7047 12.7654 22.1844C12.6706 22.1844 12.5758 22.1844 12.4782 22.1844C12.3893 22.1283 12.3005 22.0722 12.209 22.0144C11.5276 21.6154 10.426 21.3324 9.46262 21.2243C9.46262 21.1715 9.46262 21.1187 9.46262 21.0643C9.32046 21.1039 9.32046 21.1039 9.17543 21.1443C9.17543 21.1971 9.17543 21.2499 9.17543 21.3043C9.25576 21.3097 9.3361 21.3151 9.41887 21.3206C9.88304 21.41 10.1132 21.5669 10.4499 21.7644C10.9613 22.0586 11.4709 22.3308 12.0474 22.5844C12.0948 22.5316 12.1422 22.4788 12.191 22.4244C12.559 22.3744 12.559 22.3744 12.909 22.3444C12.909 22.5844 12.909 22.5844 12.7654 22.7444C12.955 22.7444 13.1445 22.7444 13.3398 22.7444C13.3398 22.6124 13.3398 22.4804 13.3398 22.3444C13.627 22.5044 13.627 22.5044 13.6449 22.7144C13.639 22.7771 13.6331 22.8398 13.627 22.9045C12.279 22.9611 11.0569 22.7215 10.0067 22.246C9.3248 21.8702 8.79492 21.4507 8.74463 20.9043Z" fill="#04343B"/>
          <path d="M4.75488 22.0781C5.32436 22.0579 5.89384 22.0376 6.48058 22.0167C6.44792 22.0728 6.41526 22.1289 6.38161 22.1867C6.5302 22.2044 6.67878 22.2222 6.83187 22.2405C7.71472 22.3706 8.58428 22.5716 9.07567 23.0161C8.98194 23.0239 8.88821 23.0316 8.79164 23.0396C8.68867 22.9913 8.58571 22.9431 8.47962 22.8934C7.6984 22.5543 6.53285 22.3644 5.55105 22.3361C5.53684 22.2838 5.52264 22.2316 5.508 22.1778C5.37806 22.2286 5.37806 22.2286 5.2455 22.2804C5.2597 22.3326 5.27391 22.3848 5.28854 22.4386C5.36944 22.4374 5.45033 22.4361 5.53367 22.4348C6.01678 22.4854 6.28664 22.6218 6.67268 22.7896C7.25761 23.0389 7.83481 23.2665 8.47321 23.4703C8.50587 23.4142 8.53853 23.3581 8.57218 23.3004C8.92264 23.2209 8.92264 23.2209 9.26073 23.1627C9.3253 23.4 9.3253 23.4 9.22633 23.57C9.41379 23.5545 9.60125 23.5391 9.79439 23.5231C9.75888 23.3926 9.72336 23.262 9.68677 23.1275C10.0138 23.2623 10.0138 23.2623 10.0881 23.4686C10.0991 23.5311 10.1101 23.5936 10.1215 23.658C8.80361 23.824 7.53056 23.6867 6.36399 23.302C5.58849 22.986 4.95162 22.6144 4.75488 22.0781Z" fill="#04343B"/>
          <path d="M0.999023 25.5923C1.49543 25.4373 1.99183 25.2823 2.50328 25.1226C2.51831 25.1809 2.53335 25.2392 2.54884 25.2993C2.69663 25.2796 2.84442 25.2599 2.99669 25.2396C3.89418 25.1446 4.83585 25.1167 5.63016 25.3987C5.55194 25.4282 5.47372 25.4576 5.39312 25.488C5.26226 25.4693 5.1314 25.4506 4.99657 25.4314C4.02502 25.3139 2.82572 25.4229 1.91977 25.6332C1.86563 25.5896 1.81148 25.546 1.75569 25.5011C1.67897 25.578 1.67897 25.578 1.6007 25.6564C1.65484 25.7 1.70899 25.7436 1.76478 25.7885C1.83658 25.768 1.90838 25.7474 1.98237 25.7262C2.45716 25.6557 2.80801 25.7136 3.28835 25.7719C4.01213 25.8558 4.71189 25.922 5.44777 25.9521C5.43273 25.8938 5.4177 25.8355 5.40221 25.7754C5.65463 25.6197 5.65463 25.6197 5.91276 25.4861C6.15888 25.6842 6.15888 25.6842 6.20444 25.8609C6.36088 25.802 6.51732 25.743 6.67851 25.6823C6.54314 25.5734 6.40778 25.4644 6.26831 25.3522C6.66942 25.3949 6.66942 25.3949 6.89959 25.5627C6.959 25.6163 7.01841 25.6699 7.07962 25.7251C6.02521 26.191 4.7709 26.3732 3.41645 26.3072C2.46829 26.2091 1.60083 26.0276 0.999023 25.5923Z" fill="#04343B"/>
          <path d="M0 23.0073C0.560538 22.9484 1.12108 22.8894 1.6986 22.8287C1.67881 22.8866 1.65901 22.9445 1.63862 23.0041C1.79006 23.0116 1.9415 23.0191 2.09752 23.0268C3.00284 23.0957 3.9109 23.2359 4.49847 23.6435C4.4072 23.6575 4.31594 23.6716 4.2219 23.6861C4.10888 23.6453 3.99586 23.6044 3.87941 23.5623C3.02796 23.2792 1.82867 23.1702 0.848044 23.209C0.822204 23.1581 0.796364 23.1073 0.76974 23.0549C0.652216 23.1141 0.652216 23.1141 0.532317 23.1745C0.558158 23.2254 0.583998 23.2762 0.610621 23.3286C0.690611 23.3219 0.7706 23.3151 0.853014 23.3082C1.34377 23.3254 1.64222 23.4423 2.06304 23.5826C2.69952 23.79 3.32348 23.9766 4.0028 24.1353C4.02259 24.0774 4.04239 24.0195 4.06278 23.9599C4.39267 23.8571 4.39267 23.8571 4.71507 23.7763C4.83252 24.0074 4.83252 24.0074 4.77254 24.1828C4.95508 24.1547 5.13762 24.1266 5.32569 24.0976C5.26109 23.9705 5.19649 23.8433 5.12993 23.7124C5.48481 23.8238 5.48481 23.8238 5.60487 24.0234C5.62985 24.0847 5.65483 24.1459 5.68056 24.2091C4.41019 24.4637 3.11607 24.4142 1.87197 24.1121C1.03137 23.8514 0.315823 23.5261 0 23.0073Z" fill="#04343B"/>
          <path d="M5.24658 27.2388C5.64832 27.0156 6.05006 26.7924 6.46398 26.5625C6.5071 26.6164 6.55023 26.6703 6.59466 26.7258C6.72726 26.6849 6.85987 26.6439 6.9965 26.6017C7.81388 26.3766 8.70668 26.2093 9.60993 26.3625C9.5491 26.4026 9.48828 26.4426 9.4256 26.4838C9.29044 26.4853 9.15528 26.4868 9.01602 26.4884C8.02299 26.52 6.92196 26.8036 6.15309 27.141C6.07955 27.1071 6.00601 27.0732 5.93025 27.0383C5.89416 27.1237 5.89416 27.1237 5.85734 27.2109C5.93088 27.2448 6.00442 27.2787 6.08018 27.3136C6.13921 27.2831 6.19824 27.2526 6.25906 27.2212C6.68151 27.0826 7.04773 27.0861 7.53882 27.0707C8.27679 27.0436 8.98301 27.0032 9.70622 26.9225C9.66309 26.8686 9.61997 26.8147 9.57554 26.7591C9.74207 26.5717 9.74207 26.5717 9.92494 26.4046C10.2592 26.5587 10.2592 26.5587 10.3899 26.722C10.5115 26.6419 10.6332 26.5619 10.7585 26.4794C10.5747 26.3947 10.3909 26.31 10.2014 26.2227C10.6086 26.2041 10.6086 26.2041 10.9126 26.3313C10.9961 26.3741 11.0797 26.4168 11.1657 26.4609C10.3795 27.0664 9.26146 27.4287 7.92511 27.5669C6.96408 27.6137 6.03982 27.5682 5.24658 27.2388Z" fill="#04343B"/>
          <path d="M9.74463 28.3691C10.0569 28.1061 10.3691 27.8431 10.6908 27.5721C10.7527 27.6201 10.8146 27.6682 10.8783 27.7177C10.9933 27.6629 11.1083 27.6081 11.2267 27.5516C11.9454 27.2408 12.7591 26.9783 13.6999 27.0286C13.6548 27.0745 13.6098 27.1204 13.5635 27.1677C13.4316 27.1841 13.2998 27.2006 13.1639 27.2175C12.2026 27.3582 11.2273 27.7577 10.5971 28.1732C10.5127 28.1481 10.4283 28.123 10.3413 28.0972C10.3371 28.1849 10.3371 28.1849 10.3328 28.2744C10.4172 28.2994 10.5016 28.3245 10.5885 28.3503C10.6353 28.314 10.682 28.2776 10.7301 28.2401C11.0935 28.0576 11.4535 28.0206 11.929 27.9512C12.6421 27.8431 13.3192 27.7254 13.9983 27.5665C13.9364 27.5184 13.8745 27.4704 13.8107 27.4209C13.9055 27.2188 13.9055 27.2188 14.0238 27.035C14.4074 27.1489 14.4074 27.1489 14.5949 27.2945C14.6849 27.2026 14.775 27.1108 14.8677 27.0161C14.6567 26.9535 14.4457 26.8908 14.2283 26.8262C14.6205 26.763 14.6205 26.763 14.9646 26.854C15.0621 26.8867 15.1595 26.9193 15.2598 26.953C14.7103 27.6331 13.747 28.1115 12.4883 28.3946C11.5638 28.5466 10.6418 28.6042 9.74463 28.3691Z" fill="#04343B"/>
          <path d="M19.1141 4.17322C19.9852 4.49767 21.1925 4.96084 21.5054 5.54958C21.5219 5.59702 21.5383 5.64446 21.5553 5.69334C21.6544 5.65085 21.7534 5.60836 21.8554 5.56458C21.9904 5.50806 22.1253 5.45155 22.2643 5.39332C22.396 5.33763 22.5276 5.28193 22.6632 5.22455C23.7168 4.84205 24.5946 4.67776 25.8543 4.69326C26.0438 4.69471 26.0438 4.69471 26.237 4.69619C27.1676 4.71207 27.9273 4.78254 28.7353 5.05329C28.848 5.08908 28.9607 5.12487 29.0769 5.16174C30.5637 5.67079 31.4851 6.43115 31.8944 7.37347C32.0839 8.37127 31.7631 9.22119 30.6469 10.0187C30.5217 10.0993 30.5217 10.0993 30.394 10.1815C30.0659 10.3961 30.0659 10.3961 29.8841 10.6537C30.0281 10.8743 30.1776 11.0667 30.3687 11.2738C30.4426 11.3575 30.4426 11.3575 30.5179 11.4428C30.6397 11.5804 30.7642 11.7172 30.8893 11.8538C30.9788 11.8574 31.0683 11.861 31.1605 11.8647C35.7007 12.0518 35.7007 12.0518 37.782 12.6539C37.9134 12.6902 38.0449 12.7265 38.1803 12.7639C39.1484 13.0419 39.9787 13.3748 40.7976 13.774C40.8892 13.8183 40.9808 13.8627 41.0752 13.9083C42.4101 14.6007 43.5625 15.7121 43.6904 16.7422C43.7188 18.3063 43.5112 19.6785 41.5414 20.8961C40.3766 21.5216 37.8619 22.4946 36.2024 22.4946C36.2024 22.5474 36.2024 22.6002 36.2024 22.6546C36.359 22.6664 36.359 22.6664 36.5188 22.6784C39.7698 22.9478 43.0989 23.8861 45.1056 25.3749C45.1889 25.4345 45.2721 25.4941 45.358 25.5555C46.0466 26.072 46.5232 26.6239 46.9723 27.215C47.0218 27.2764 47.0712 27.3377 47.1221 27.4009C48.1929 29.0689 47.7252 31.0292 46.4258 32.6088C44.7941 34.4893 41.6256 35.8621 38.1371 36.5635C34.8706 37.1674 31.6127 37.4908 28.1698 37.4808C28.0616 37.4806 27.9534 37.4804 27.8419 37.4803C23.4475 37.4691 19.0419 37.0922 14.9498 36.1757C14.8455 36.1525 14.7412 36.1292 14.6337 36.1053C10.5116 35.1747 10.5116 35.1747 9.47226 34.1796C9.26796 33.9067 9.32519 33.7308 9.49301 33.4555C9.80501 33.2368 10.1544 33.0794 10.5526 32.9111C11.6263 32.4528 12.3498 32.0354 12.6039 31.2781C12.712 30.7791 12.7538 30.2771 12.7958 29.7752C12.9156 29.751 13.0353 29.7267 13.1587 29.7017C14.1403 29.4982 15.0591 29.2782 15.955 28.9751C16.0488 29.0982 16.1413 29.2216 16.2332 29.3452C16.2848 29.4138 16.3365 29.4825 16.3897 29.5533C16.5367 29.7868 16.6118 30.0105 16.673 30.2552C18.0447 29.8586 19.3352 29.4817 20.4424 28.8723C20.6937 28.7351 20.6937 28.7351 20.9809 28.6551C20.9815 28.7134 20.9821 28.7717 20.9827 28.8318C21.0121 31.1641 21.0121 31.1641 23.0059 33.1545C23.6572 33.4956 24.3195 33.7466 25.1453 33.9355C25.2612 33.9627 25.3771 33.99 25.4964 34.018C27.4957 34.4404 30.0309 34.3709 32.038 34.0155C32.2274 33.9821 32.2274 33.9821 32.4206 33.948C34.4086 33.5502 35.7811 32.7881 36.7768 31.7753C36.8316 31.7254 36.8864 31.6755 36.9428 31.6241C38.1539 30.4484 38.1122 28.6452 37.5576 27.36C36.8594 26.1469 35.6035 25.1028 33.6059 24.4498C31.9929 24.0071 30.3675 23.8463 28.6422 24.1713C27.5536 24.4403 26.8416 24.889 26.1774 25.4249C25.8572 25.9319 25.8922 26.4499 26.1774 26.96C26.7437 27.5161 26.7437 27.5161 27.5865 27.9351C27.9934 27.9665 27.9934 27.9665 28.4391 27.9651C28.5885 27.9673 28.7379 27.9696 28.8918 27.9719C29.4157 27.9257 29.5652 27.8477 29.8841 27.615C30.0621 27.4159 30.0621 27.4159 30.1892 27.205C30.4305 26.8305 30.4305 26.8305 30.7457 26.655C31.315 26.6609 31.6782 26.7117 32.1727 26.87C32.6587 27.3049 32.5803 27.7575 32.4688 28.2551C32.2445 28.5351 32.2445 28.5351 31.8944 28.7351C31.8247 28.7757 31.7549 28.8164 31.683 28.8582C30.8365 29.3109 29.8366 29.5489 28.6635 29.5702C27.547 29.5455 26.5506 29.3552 25.5761 29.0551C25.5761 29.0023 25.5761 28.9495 25.5761 28.8951C25.4517 28.8657 25.4517 28.8657 25.3248 28.8357C24.3487 28.5317 23.689 27.9396 23.2785 27.375C23.2357 27.3248 23.193 27.2746 23.1489 27.2228C22.8363 26.8046 22.8073 26.4019 22.8028 25.9549C22.8021 25.8962 22.8013 25.8375 22.8005 25.7771C22.8083 25.4489 22.8731 25.19 23.1349 24.8948C22.994 24.9364 22.8532 24.9779 22.708 25.0208C19.6604 25.9048 16.1423 26.5015 12.6825 26.114C12.0613 26.0031 11.5121 25.859 10.9469 25.6799C10.2758 25.4781 9.5694 25.4963 8.82213 25.4745C7.49643 25.4199 6.63749 25.0422 5.75944 24.4948C5.57433 24.2716 5.57433 24.2716 5.47224 24.0948C6.66543 23.8732 8.07425 23.957 9.19852 24.2491C9.40085 24.308 9.60161 24.3685 9.80096 24.4304C9.88889 24.4517 9.97681 24.4729 10.0674 24.4948C10.1622 24.4684 10.257 24.442 10.3546 24.4148C10.402 24.3356 10.4494 24.2564 10.4982 24.1748C10.4982 24.2276 10.4982 24.2804 10.4982 24.3348C10.6404 24.2556 10.7825 24.1764 10.929 24.0948C10.783 23.8758 10.6297 23.6839 10.4085 23.4847C10.211 23.2947 10.211 23.2947 10.211 23.0547C11.554 23.0017 12.8066 23.112 13.9446 23.5347C14.2436 23.4517 14.2436 23.4517 14.519 23.2947C14.6816 22.9254 14.6646 22.6243 14.519 22.2546C16.025 22.2576 17.2082 22.4736 18.3872 23.0047C19.3731 23.7038 19.3731 23.7038 19.4462 24.0948C19.4314 24.1476 19.4166 24.2004 19.4013 24.2548C18.1705 24.2662 18.1705 24.2662 17.6782 24.1748C17.6308 24.2804 17.5834 24.386 17.5346 24.4948C17.7241 24.4684 17.9137 24.442 18.1089 24.4148C18.1089 24.494 18.1089 24.5732 18.1089 24.6548C18.2511 24.6812 18.3933 24.7076 18.5397 24.7348C18.3502 24.7612 18.1606 24.7876 17.9653 24.8148C17.9653 24.8676 17.9653 24.9204 17.9653 24.9748C17.8232 24.9748 17.681 24.9748 17.5346 24.9748C17.5346 25.0276 17.5346 25.0804 17.5346 25.1348C19.9785 24.6253 22.1824 23.9792 24.3979 23.2135C24.8345 23.0628 25.2732 22.9143 25.713 22.7665C27.0624 22.3108 28.3639 21.8447 29.5969 21.2945C29.7318 21.2365 29.8668 21.1784 30.0058 21.1186C31.6622 20.3912 33.5333 19.3814 33.8023 18.1459C33.8189 17.9447 33.8211 17.7456 33.8151 17.5443C33.8136 17.4735 33.8122 17.4028 33.8107 17.3299C33.7728 16.444 33.3824 15.7055 32.208 15.0738C30.5679 14.3372 28.6092 14.2304 26.5813 14.334C24.7735 14.5164 23.4652 15.089 22.3771 15.8857C21.0176 17.0313 21.1097 18.5142 21.0791 19.8332C21.0761 19.943 21.0731 20.0529 21.07 20.1627C21.0622 20.4484 21.0551 20.734 21.0481 21.0197C21.0408 21.3126 21.0329 21.6055 21.025 21.8983C21.0096 22.4705 20.995 23.0426 20.9809 23.6147C20.6866 23.3986 20.4207 23.1802 20.1642 22.9497C19.1117 22.0642 17.6979 21.7001 15.8796 21.4883C15.2824 21.4316 14.6848 21.4181 14.0803 21.4052C13.9559 21.402 13.8316 21.3989 13.7034 21.3957C13.4009 21.3881 13.0984 21.3812 12.7958 21.3745C12.7946 21.3185 12.7935 21.2625 12.7923 21.2048C12.781 20.673 12.7684 20.1411 12.7545 19.6092C12.7474 19.3359 12.7407 19.0625 12.7352 18.7892C12.7288 18.4738 12.7203 18.1584 12.7116 17.843C12.71 17.7465 12.7083 17.6499 12.7066 17.5505C12.688 16.9448 12.576 16.3684 12.365 15.7741C12.2727 15.7918 12.1805 15.8094 12.0855 15.8276C10.4644 16.1376 8.54776 16.3091 6.94188 15.8797C5.45953 15.3917 4.15238 14.652 3.67382 13.7051C3.31329 12.8025 3.4961 11.9229 4.32681 11.13C5.24859 10.3627 6.30458 9.9222 7.85957 9.57864C8.50354 9.51884 9.12912 9.5205 9.78021 9.53364C9.73171 9.47568 9.68321 9.41771 9.63324 9.358C9.5692 9.28065 9.50515 9.2033 9.43916 9.1236C9.37585 9.04749 9.31255 8.97138 9.24732 8.89296C8.56377 8.00895 8.53543 7.05829 9.15869 6.15838C10.0987 5.04929 11.4478 4.26571 13.5441 3.83945C15.3661 3.61758 17.4806 3.64029 19.1141 4.17322Z" fill="#04343B"/>
          </svg>
          </Link>
          <div className={styles.logoUnderline} />
        </div>

          {/* DESKTOP NAV */}
          <nav className="hidden md:flex items-center gap-1 relative">
            {/* Floating background indicator */}
            <div 
              className={styles.floatingIndicator}
              style={{
                left: `${indicatorStyle.left}px`,
                width: `${indicatorStyle.width}px`,
                opacity: hoveredIndex !== null || activeIndex !== -1 ? 1 : 0,
              }}
            />
            
            {navLinks.map((link, index) => {
              const isCurrentPage = pathname === link.href;
              
              return (
                <div
                  key={link.href}
                  className="relative"
                  onMouseEnter={(e) => {
                    setHoveredIndex(index);
                    updateIndicator(e.currentTarget.querySelector('a'));
                  }}
                  onMouseLeave={() => {
                    setHoveredIndex(null);
                    const activeLink = document.querySelector(`[data-nav-index="${activeIndex}"]`) as HTMLElement;
                    if (activeLink) {
                      updateIndicator(activeLink);
                    }
                  }}
                >
                  <Link
                    href={link.href}
                    data-nav-index={index}
                    className={`
                      ${styles.navLink}
                      ${isCurrentPage ? styles.navLinkActive : ''}
                    `}
                  >
                    {link.label}
                    
                    {isCurrentPage && (
                      <span className={styles.activeDot} />
                    )}
                    
                    <span className={styles.shimmer} />
                  </Link>
                </div>
              );
            })}
          </nav>

          {/* SEARCH BAR - DESKTOP */}
          <div className="hidden md:flex items-center gap-3">
            <div className={styles.searchContainer}>
              <input
                type="text"
                placeholder="Search Product..."
                className={styles.searchInput}
              />
              <Search className={styles.searchIcon} />
              <div className={styles.searchGlow} />
            </div>
          </div>

          {/* MOBILE MENU BUTTON */}
          <button
            onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
            className="md:hidden p-2 rounded-lg hover:bg-slate-100 transition-colors"
            aria-label="Toggle menu"
          >
            {mobileMenuOpen ? (
              <X className="w-6 h-6 text-slate-700" />
            ) : (
              <Menu className="w-6 h-6 text-slate-700" />
            )}
          </button>
        </div>
      </div>

      {/* MOBILE MENU */}
      <div 
        className={`
          md:hidden
          bg-white border-t border-slate-200 shadow-xl
          transition-all duration-300 ease-in-out
          ${mobileMenuOpen ? 'max-h-screen opacity-100' : 'max-h-0 opacity-0 overflow-hidden'}
        `}
      >
        <div className="px-6 py-4 space-y-2">
          {/* Mobile Navigation Links */}
          {navLinks.map((link) => {
            const isCurrentPage = pathname === link.href;
            
            return (
              <Link
                key={link.href}
                href={link.href}
                className={`
                  block px-4 py-3 rounded-lg
                  transition-all duration-200 font-semibold
                  ${isCurrentPage 
                    ? 'bg-gradient-to-r from-teal-50 to-emerald-50 text-teal-600' 
                    : 'text-slate-700 hover:bg-slate-50 hover:text-teal-600'
                  }
                `}
              >
                <span className="flex items-center justify-between">
                  {link.label}
                  {isCurrentPage && (
                    <span className="w-2 h-2 bg-teal-500 rounded-full animate-pulse" />
                  )}
                </span>
              </Link>
            );
          })}
          
          {/* Mobile Search Bar */}
          <div className="pt-4 border-t border-slate-200">
            <div className="relative">
              <Search className="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400" />
              <input
                type="text"
                placeholder="Search Product..."
                className="
                  w-full pl-12 pr-4 py-3
                  bg-slate-50
                  border border-slate-200
                  rounded-xl
                  text-sm font-medium
                  outline-none
                  transition-all duration-200
                  focus:border-teal-500
                  focus:ring-2
                  focus:ring-teal-500/20
                  focus:bg-white
                "
              />
            </div>
          </div>
          
          {/* Mobile CTA Button */}
          <div className="pt-2">
          </div>
        </div>
      </div>
    </header>
  );
}